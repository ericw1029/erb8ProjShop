{% extends 'base.html' %}

{% block title %}{{ profile.full_name }} - 使用者資訊{% endblock %}

{% block content %}
<div class="container my-5">


<div class="row">
    <div class="col-md-4">
        <!-- Profile Card -->
        <div class="card mb-4">
            <div class="card-header text-center">
                <h4 class="mb-0">個人資料圖片</h4>
            </div>
            <div class="card-body text-center">
                {% if profile.profile_image %}
                    <img src="{{ profile.profile_image.url }}" 
                         alt="{{ profile.full_name }}" 
                         class="profile-image mb-3">
                {% else %}
                    <div class="bg-secondary text-white rounded-circle d-flex align-items-center justify-content-center mx-auto mb-3" 
                         style="width: 150px; height: 150px;">
                        <i class="fas fa-user fa-4x"></i>
                    </div>
                {% endif %}
                
                <h3>{{ profile.full_name }}</h3>
                <p class="text-muted">{{ profile.email }}</p>
                
                {% if profile.gender %}
                    <span class="badge gender-badge">
                        <i class="fas fa-{% if profile.gender == 'M' %}mars{% elif profile.gender == 'F' %}venus{% else %}genderless{% endif %} me-1 mr-2"></i>
                        {{ profile.get_gender_display }}
                    </span>
                {% endif %}
                
                {% if profile.age %}
                    <span class="badge bg-info ms-1">
                        <i class="fas fa-birthday-cake me-1 mr-2"></i>{{ profile.age }} 年
                    </span>
                {% endif %}
            </div>
            {% if user.id == profile.user_id %}
            <div class="card-footer text-center">
                <a href="{% url 'accounts:profile_update' profile.user_id %}" class="btn btn-warning me-2">
                    <i class="fas fa-edit me-1"></i>編輯
                </a>
            </div>
            {% endif %}
        </div>
        
        <!-- Contact Info -->
        <div class="card">
            <div class="card-header">
                <h5 class="mb-0"><i class="fas fa-address-book me-2 mr-2"></i>聯絡資訊</h5>
            </div>
            <div class="card-body">
                <p><strong><i class="fas fa-phone me-2 mr-2"></i>電話:</strong><br>
                   {{ profile.phone|default:"Not provided" }}</p>
                <p><strong><i class="fas fa-map-marker-alt me-2 mr-2"></i>地址:</strong><br>
                   {{ profile.address|default:"Not provided"|linebreaksbr }}</p>
                <p><strong><i class="fas fa-city me-2 mr-2"></i>城市:</strong><br>
                   {{ profile.city|default:"Not provided" }}</p>
                <p><strong><i class="fas fa-globe me-2 mr-2"></i>國家:</strong><br>
                   {{ profile.country|default:"Not provided" }}</p>
            </div>
        </div>
    </div>
    
    <div class="col-md-8">
        <!-- Bio Card -->
        <div class="card mb-4">
            <div class="card-header">
                <h5 class="mb-0"><i class="fas fa-user-circle me-2 mr-2"></i>履歷</h5>
            </div>
            <div class="card-body">
                {% if profile.bio %}
                    <p>{{ profile.bio|linebreaks }}</p>
                {% else %}
                    <p class="text-muted fst-italic">沒有提供履歷</p>
                {% endif %}
            </div>
        </div>
        
        <!-- Additional Info -->
        <div class="card">
            <div class="card-header">
                <h5 class="mb-0"><i class="fas fa-info-circle me-2 mr-2"></i>附加資訊</h5>
            </div>
            <div class="card-body">
                <div class="row">
                    <div class="col-md-6">
                        <p><strong><i class="fas fa-calendar-alt me-2 mr-2"></i>出生日期:</strong><br>
                           {{ profile.date_of_birth|date:"F d, Y"|default:"Not provided" }}</p>
                    </div>
                    <div class="col-md-6">
                        <p><strong><i class="fas fa-calendar-plus me-2 mr-2"></i>創建:</strong><br>
                           {{ profile.created_at|date:"F d, Y H:i" }}</p>
                    </div>
                    <div class="col-md-6">
                        <p><strong><i class="fas fa-calendar-check me-2 mr-2"></i>最後更新:</strong><br>
                           {{ profile.updated_at|date:"F d, Y H:i" }}</p>
                    </div>
                    <div class="col-md-6">
                        <p><strong><i class="fas fa-id-card me-2 mr-2"></i>檔案編號:</strong><br>
                           {{ profile.id }}</p>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<div class="mt-4">
    <a href="{% url 'pages:product_list' %}" class="btn btn-secondary">
        <i class="fas fa-arrow-left me-1 mr-2"></i>返回產菜餚列表
    </a>
</div>
</div>
{% endblock %}